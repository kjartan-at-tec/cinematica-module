#+OPTIONS: toc:nil
# #+LaTeX_CLASS: koma-article 

#+LATEX_CLASS: beamer
#+LATEX_CLASS_OPTIONS: [presentation,aspectratio=169]
#+OPTIONS: H:2

#+LaTex_HEADER: \usepackage{khpreamble}
#+LaTex_HEADER: \usepackage{amssymb}
#+LaTex_HEADER: \usepgfplotslibrary{groupplots}
#+LaTex_HEADER: \newcommand*{\shift}{\ensuremath{\operatorname{q}}}


#+title: Cinemática directa en 2D
# #+date: 2021-06-28

* What do I want the students to understand?			   :noexport:
  - Pose in 2D as product of transformations


* Which activities will the students do?			   :noexport:
  1. Derive transformation for one degree of freedom
  2. Writing code for 2D manipulator
  3. 

* Repeticción
** Pose en 2D

\begin{center}
\includegraphics[height=0.5\textheight]{../figures/Corke-fig2.6.png}

\footnotesize Peter Corke \emph{Robotics, vision and control}
\end{center}
*** Notes                                                          :noexport:

- Transformación rígida coniste en una rotación y un desplazimiento.
- 
  
* Manipulador como cadena de transfomraciones

** Transformación básica - rotación 

\begin{center}
 \includegraphics[height=0.8\textheight]{../figures/2d-revolute-default-pos.pdf}
\end{center}

*** Notes                                                          :noexport:
- Hay tres sistemas de referencia
  1. El sistems estática (world frame):  x, y {W}
  2. El sistem del tool tip (o end effector): x_e, y_e {E}
     cual es está fijo en el brazo 
  3. Otro sistema de referencia fijo en el brazo {L}, y que coincide con el sistema de referencia world
- Transformación que transforma puntos en el sistema del efector al sistema {L}:
  ^Lg_E = [I c_e; 0 1]
- Ejercico: Transformación que transforma puntos en {L} a puntos en {E}
  ^Eg_L = [I -c_e; 0 1]
- Ejercicio: La combinación de las dos transformas debe ser una transforma de identidad, es decir
  ^Eg_E = ^Eg_L ^Lg_E = I. Enseña!
  ^Eg_E = [I c_e; 0 1] [I -c_e; 0 1] = [I*I -c_e+e_c; 0 1] = [I 0;0 1]
- Ejercicio: Una transformación rigida general:
  g = [R d;0 1]. Cual es su inversa?
  g*g^{-1} = I
  g*g^{-1} = [R d;0 1]*[R1 d1;0 1] = [R*R1 Rd1-d; 0 1], R*R1 = I  => R1 = R', Rd1 - d=0, => d_1 = R'd
  

** Transformación básica - rotación 

\begin{center}
 \includegraphics[height=0.8\textheight]{../figures/2d-revolute.pdf}
\end{center}

*** Notes                                                          :noexport:

- Nos interesa la transformación entre el sistema {E} y {W}.
  ^Wg_E = ^Wg_L ^Lg_E
- La orientción de los ejes de {L} es dado por la matriz de rotación
  R = [c(th) -s(th)
       s(th) c(th)]
- La transformación deja el centro de rotación en reposo.
  ^Wg_L p = p
  [R d;0 1] p = Rp + d = p  => d = p-Rp
  Este  desplazamiento es obvio el desplazamiento del origen of {L}

- Si el origen de la marca L estaría en el eje de rotación:
  t = q
- La rotación sigue la misma

  => La rotatción no depende de donde ponemos el origen. Es una propiedad del cuerpo.
  => La traslación sí depende de donde ponemos el origen.
** Transformación básica - desplazamiento

\begin{center}
 \includegraphics[height=0.8\textheight]{../figures/2d-prismatic-default-pos.pdf}
\end{center}

*** Notes                                                          :noexport:
- Nos interesa la transformación entre el sistema {E} y {W}.
  Esta es muy simple. Si la dirección del desplazamiento es dado por un vector v de magnitud 1,
  ^Wg_L = [I v\theta; 0 1]
- Ejercicio: Encuentra la tranformada inverse
  g^{-1}g = I

** Transformación básica - desplazamiento

\begin{center}
 \includegraphics[height=0.8\textheight]{../figures/2d-prismatic.pdf}
\end{center}
** Cadena de transformaciones

\begin{center}
 \includegraphics[height=0.8\textheight]{../figures/2d-2dof-prismatic-revolute.pdf}
\end{center}

*** Notes                                                          :noexport:
- Nos interesa la transformación entre el sistema {E} y {W}.
  ^Wg_E = ^Wg_L1 ^L1g_L2 ^L2g_E
- El sistema de referencia "local" de cada enlace coincide con el sistem global en
  la configuración de referencia (cada variable = 0)
- Entonces el analisis que hicimos para los dos transformaciones básicos. se puede aplicar directamente
  

** Cadena de transformaciones

\begin{center}
 \includegraphics[height=0.8\textheight]{../figures/2d-2dof-prismatic-revolute-prism0.pdf}
\end{center}

** Cadena de transformaciones

\begin{center}
 \includegraphics[height=0.8\textheight]{../figures/2d-2dof-prismatic-revolute.pdf}
\end{center}

** Ejercicio - Articulación prismática y articulación revolutaria

\begin{center}
 \includegraphics[height=0.8\textheight]{../figures/2d-2dof-prismatic-revolute.pdf}
\end{center}

*** Notes                                                          :noexport:

En configuración default, q1=0, q2=0

g_t = [I l1;0;1]

g = g_1 * g_2 * g_t

g_1 = [1 0 q1
       0 1 0
       0 0 1]

R_2 = [c2 -s2  
      s2  c2]
d_2 = p_2 - R_2 p_2 = (I - R2) p_2 
g_2 = [R_2 d_2; 0 1]
